if [[ -z ${SSH_CONNECTION} && "${gnupg_SSH_AUTH_SOCK_by:-0}" -ne $$ ]]; then
	unset SSH_AGENT_PID
	export SSH_AUTH_SOCK="$(gpgconf --list-dirs agent-ssh-socket)"
fi

export TERM=screen-256color
# You may need to manually set your language environment
export LANG=en_US.UTF-8
export LANGUAGE=en_US.UTF-8
export LC_ALL=en_US.UTF-8

export PATH=${HOME}/bin:${HOME}/.local/bin:/usr/local/bin:${PATH}
[[ -d /snap/bin ]] && export PATH=${PATH}:/snap/bin
export GOPATH=${HOME}/.local
export RLWRAP_HOME=${HOME}/.cache/RLWRAP

[[ -f ${HOME}/.proxy.local ]] && source ${HOME}/.proxy.local

mkdir -p ${HOME}/.local/bin
mkdir -p ${RC_LOCAL}

# Load homeshick
if [ ! -d ${HOME}/.homesick ]; then
	git clone https://github.com/andsens/homeshick.git ${HOME}/.homesick/repos/homeshick
	source "${HOME}/.homesick/repos/homeshick/homeshick.sh"
	fpath=(${HOME}/.homesick/repos/homeshick/completions ${fpath})
	homeshick --quiet --batch clone https://github.com/NemesisRE/dotfiles.git
	homeshick --quiet --batch clone https://github.com/NemesisRE/vimfiles.git
	homeshick --quiet --batch --force link
	fc-cache -fv
fi

if [[ ! -f "${HOME}/.local/bin/nvim" ]] || [[ $(find "${HOME}/.local/bin/nvim" -mtime +7 -print) ]]; then
	curl -Lsso ${HOME}/.local/bin/nvim https://github.com/neovim/neovim/releases/download/nightly/nvim.appimage
	chmod +x ${HOME}/.local/bin/nvim
fi

